function mouseovered(t){node.each(function(t){t.target=t.source=!1}),link.classed("link--target",function(e){if(e.target===t)return e.source.source=!0}).classed("link--source",function(e){if(e.source===t)return e.target.target=!0}).filter(function(e){return e.target===t||e.source===t}).raise(),node.classed("node--target",function(t){return t.target}).classed("node--source",function(t){return t.source})}function mouseouted(t){link.classed("link--target",!1).classed("link--source",!1),node.classed("node--target",!1).classed("node--source",!1)}function packageHierarchy(t){function e(t,n){var a=r[t],o;return a||(a=r[t]=n||{name:t,children:[]},t.length&&(a.parent=e(t.substring(0,o=t.lastIndexOf("."))),a.parent.children.push(a),a.key=t.substring(o+1))),a}var r={};return t.forEach(function(t){e(t.name,t)}),d3.hierarchy(r[""])}function packageImports(t){var e={},r=[];return t.forEach(function(t){e[t.data.name]=t}),t.forEach(function(t){t.data.imports&&t.data.imports.forEach(function(n){r.push(e[t.data.name].path(e[n]))})}),r}var diameter=600,radius=diameter/2,innerRadius=radius-120,margin={top:80,right:80,bottom:80,left:80},width=1050-margin.left-margin.right,height=800-margin.top-margin.bottom,cluster=d3.cluster().size([360,innerRadius]),line=d3.radialLine().curve(d3.curveBundle.beta(.9)).radius(function(t){return t.y}).angle(function(t){return t.x/180*Math.PI}),svg=d3.select("body").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+(margin.left+width/2+80)+","+(margin.top+height/2)+")"),link=svg.append("g").selectAll(".link"),node=svg.append("g").selectAll(".node");d3.json("gcro.json",function(t,e){function r(t){return e.map(function(t){return t.color})}if(t)throw t;var n=packageHierarchy(e).sum(function(t){return t.size});cluster(n),link=link.data(packageImports(n.leaves())).enter().append("path").each(function(t){t.source=t[0],t.target=t[t.length-1]}).attr("class","link").attr("d",line).attr("stroke",function(t){return t[0].data.color}).attr("stroke-width",.2).attr("stroke-dasharray",function(t){return t[0].data.stroke}),node=node.data(n.leaves()).enter().append("text").attr("class","node").attr("dy","0.31em").attr("transform",function(t){return"rotate("+(t.x-90)+")translate("+(t.y+8)+",0)"+(t.x<180?"":"rotate(180)")}).attr("text-anchor",function(t){return t.x<180?"start":"end"}).style("font-size","8px").text(function(t){return t.data.key}).on("mouseover",mouseovered).on("mouseout",mouseouted)});